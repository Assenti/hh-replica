<div class="search">
	<div class="search__tools">
		<span class="search__tools-title">Настройки поиска</span>
		<div class="search__tool">
			<span ng-class="{'active': vm.chosenOption === 'Вакансии'}" class="search__tool-option" ng-click="vm.uniSearch('Вакансии', 'vacancy')">Вакансии</span>
			<span ng-class="{'active': vm.chosenOption === 'Резюме'}" class="search__tool-option" ng-click="vm.uniSearch('Резюме', 'cv')">Резюме</span>
			<span ng-class="{'active': vm.chosenOption === 'Компании'}" class="search__tool-option" ng-click="vm.uniSearch('Компании', 'employer')">Компании</span>
		</div>

		<div class="search__tool" ng-if="vm.chosenOption != 'Компании'">
			<span class="search__tool-title">Опыт работы:</span>
			<div ng-class="{'selected': vm.year != 'Выберите опыт'}" class="search__tool-select">
				<select class="select" ng-change="vm.filterByXpLength()" ng-options="year as year for year in vm.years" ng-model="vm.year"></select>
				<img src="../images/sort-arrows.svg">
			</div>
		</div>

		<div class="search__tool" ng-if="vm.chosenOption != 'Компании'">
			<span class="search__tool-title">Заработная плата:</span>
			<div ng-class="{'selected': vm.salary != 'Выберите оклад'}" class="search__tool-select">
				<select class="select" ng-change="vm.filterBySalary()" ng-options="salary as salary for salary in vm.salaries" ng-model="vm.salary"></select>
				<img src="../images/sort-arrows.svg">
			</div>
		</div>

		<div class="search__tool">
			<button class="btn btn_disable" ng-click="vm.resetFilters()">Сбросить фильтры</button>
		</div>

	</div>
	<div class="search__results">
		<span class="search__results-title" ng-bind="'Результаты поиска - найдено: ' + vm.count + ' '+vm.found"></span>

		<div class="search__results-head">
			<div class="search__results-filters">
				<select class="select" ng-change="vm.setFilter()" ng-options="filter as filter for filter in vm.filterOptions" ng-model="vm.filterOption"></select>
				<img src="../images/sort-arrows.svg">
			</div>

			<div class="pagination" ng-if="vm.pages.length > 1">
				<div class="pagination__item" ng-click="vm.prevPage()"><</div>
				<div ng-class="{'active': vm.currentPage === (page + 1)}" class="pagination__item" ng-repeat="page in vm.pages track by $index" ng-bind="page+1" ng-click="vm.displayPage(page+1)"></div>
				<div class="pagination__item" ng-click="vm.nextPage()">></div>
			</div>
		</div>

		<div class="search__result" ng-if="vm.notFound">По запросу ничего не найдено</div>

		<div class="search__result" ng-repeat="result in vm.results | orderBy: vm.filter" ng-if="vm.results[0].position === undefined">
			<a ng-bind="'Компания: '+result.name" ui-sref="employer({id: result._id})"></a>
			<span ng-bind="'Сайт: '+result.site"></span>
			<span ng-bind="'Сотрудники: '+result.employeesQuantity"></span>
			<span ng-bind="'Город: '+result.city"></span>
		</div>
		
		<div class="search__result" ng-repeat="result in vm.results | orderBy: vm.filter" ng-if="vm.results[0].name === undefined">
			<a ng-bind="result.position" ng-if="result.employer != undefined" ui-sref="vacancy({id: result._id})"></a>
			<a ng-bind="result.position" ng-if="result.employer == undefined" ui-sref="cv({id: result._id, user_id: session._id})"></a>
			<span ng-bind="'Оклад: '+(result.salary | salary)+' KZT'"></span>
			<span ng-bind="'Стаж: '+result.xpLength+' лет'"></span>
			<span ng-bind="'Размещено: '+(result.date | myDate)"></span>
		</div>

	</div>
</div>
