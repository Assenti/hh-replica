<div class="cv">
	<a class="cv__back-link" ui-sref="user({id: session._id})" ng-if="session._id == vm.cv.user && !session.employerAccess"><img src="../images/left-chevron.svg"> Назад в кабинет</a>
	
	<div class="cv__header">
		<div class="cv__info">
			<img ng-src="{{ vm.cv.link || '../images/no-image.png' }}">
			<div class="cv__info-contacts">
				<span ng-bind="(vm.user.firstname)+' '+(vm.user.lastname)"></span>
				<span ng-bind="(vm.cv.gender)+', родился '+(vm.cv.birthDate | myDate)"></span>
				<span ng-bind="'Контактный телефон: '+(vm.user.phone)"></span>
				<span ng-bind="'Email: '+(vm.user.email)"></span>
				<span ng-bind="'Адрес: ' + (vm.cv.address)"></span>
				<span ng-bind="'Гражданство: ' + (vm.cv.citizenship)"></span>
			</div>
		</div>
		<div class="cv__controls">
			<img src="../images/edit.svg" ng-click="vm.openEditor()" title="Редактировать" ng-if="session._id == vm.cv.user && !session.employerAccess">
			<img src="../images/trash.svg" ng-click="vm.openModal()" title="Удалить" ng-if="session._id == vm.cv.user && !session.employerAccess">
			<button class="btn btn_dashboard" ng-if="session.employerAccess" ng-click="vm.invite(session)">Пригласить</button>
		</div>
	</div>

	<div class="cv__editor-close">
		<input class="input" type="date" ng-model="vm.objectToEdit.birthDate" ng-if="vm.editor">
		<span class="cv__closer" ng-click="vm.closeEditor()" ng-if="vm.editor">&times;</span>
	</div>
	<input class="input" type="text" ng-model="vm.objectToEdit.address" ng-if="vm.editor">
	<div class="cv__position-info">
		<span ng-bind="vm.cv.position"></span>
		<span ng-bind="(vm.cv.salary | salary)+' KZT'"></span>
	</div>
	<input class="input" type="text" ng-model="vm.objectToEdit.position" ng-if="vm.editor">
	<input class="input" type="number" ng-model="vm.objectToEdit.salary" ng-if="vm.editor">
	<div class="cv__work-info">
		<span ng-bind="'Опыт работы '+(vm.cv.xpLength)+' год'"></span>
		<span ng-bind="'Прежнее место работы: '+(vm.cv.work)"></span>
	</div>
	<input class="input" type="text" ng-model="vm.objectToEdit.xpLength" ng-if="vm.editor">
	<input class="input" type="text" ng-model="vm.objectToEdit.work" ng-if="vm.editor">
	<div class="cv__skills-info">
		<span>Ключевые навыки:</span>
		<div class="cv__skills">
			<div class="skills" ng-repeat="skill in vm.skills" ng-bind="skill.skill"></div>
		</div>
	</div>

	<div class="cv__add-skills">
		<input class="input" type="text" ng-model="vm.skill" ng-if="vm.editor">
		<span class="skills__add-btn" ng-click="vm.addSkill()" title="Добавить навык" ng-if="vm.editor">&plus;</span>
	</div>

	<div class="cv__edit-skills" ng-if="vm.editor">
		<div class="skills_wo" ng-repeat="skill in vm.skillsToEdit">
			<span class="skill" ng-bind="skill"></span>
			<span class="delete-skill" ng-click="vm.removeSkill($index)" ng-if="vm.editor">&times;</span>
		</div>
	</div>

	<div class="cv__education-info">
		<span>Высшее образование:</span>
		<span ng-bind="'Учебное заведение: ' + (vm.cv.education)"></span>
		<span ng-bind="'Специализация: ' + (vm.cv.specialization)"></span>
	</div>
	<input class="input" type="text" ng-model="vm.objectToEdit.education" ng-if="vm.editor">
	<input class="input" type="text" ng-model="vm.objectToEdit.specialization" ng-if="vm.editor">
	<div class="cv__education-info">
		<span>Повышение квалификации, курсы:</span>
		<span ng-bind="'Учебное заведение: ' + (vm.cv.courses)"></span>
	</div>
	<input class="input" type="text" ng-model="vm.objectToEdit.courses" ng-if="vm.editor">
	<div>
		<button class="btn btn_dashboard" ng-click="vm.editCV()" ng-if="vm.editor">Сохранить изменения</button>		
		<button class="btn btn_disable" ng-click="vm.closeEditor()" ng-if="vm.editor">Отмена</button>	
	</div>
</div>



<div class="modal-backdrop" ng-if="vm.modal" ng-click="vm.closeModal()">
	<div class="modal-window">
		<span>Вы уверены что хотите удалить?</span>
		<button class="btn btn_manager" ng-click="vm.deleteCV()">Удалить</button>
		<button class="btn btn_disable" ng-click="vm.closeModal()">Отмена</button>
	</div>
</div>


<span class="message success" ng-if="vm.success">
	Приглашение успешно отправлено.
	<span class="message-close" ng-click="vm.success = false">&times;</span>
</span>

<span class="message error" ng-if="vm.error">
	Произошла ошибка, повторите попытку.
	<span class="message-close" ng-click="vm.error = false">&times;</span>
</span>