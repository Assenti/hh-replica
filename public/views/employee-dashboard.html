<div class="employee-dash">
	<div class="employee-dash-events">
		<div class="employee-dash-title">Мои события</div>
		<li class="employee-dash-events-item">
			<i></i>
			<span ng-bind="'Приглашения: '+vm.invites"></span>
		</li>
		<button class="btn active" ng-click="vm.openCVMaker()" ng-if="session && !session.employerAccess">Создать резюме</button>
	</div>
	<div class="employee-dash-cvs">
		<div class="employee-dash-title">Мои резюме</div>
		<div class="employee-dash-cvs-item" ng-repeat="cv in vm.cvs">
			<span ng-bind="cv.position + ' - ' + (cv.salary | salary) +' KZT'"></span>
			<img src="../images/info-circle.svg" ui-sref="cv({id: cv._id})" title="Перейти к резюме">
			<img src="../images/trash.svg" ng-click="vm.openModal(cv, $index)" ng-if="session && !session.employerAccess" title="Удалить">
			<img src="../images/invitation.svg" 
				 ng-if="session && !session.employerAccess && cv.responses.length > 0" 
				 title="Приглашение" 
				 ng-repeat="response in cv.responses track by $index"
				 ng-click="vm.removeResponse(cv, response)" 
				 ui-sref="employer({id: response })">
		</div>
	</div>
	<div class="employee-dash-offers">
		<div class="employee-dash-title">Рекомендованные вакансии</div>
		<li ng-repeat="vacancy in vm.vacancies" ng-bind="vacancy.position"></li>
	</div>
</div>
<div class="cv" id="cvForm">
	<span class="cv-title">Создание резюме <span class="cv-close" ng-click="vm.closeCVMaker()">&times;</span></span>
	<div class="cv-content">
		<form class="cv-form" ng-submit="vm.saveCV()">
			<input class="cv-form-input" type="text" ng-model="vm.position" placeholder="Должность*" required>
			<span class="cv-form-output" ng-bind="vm.position" ng-if="vm.position != null"></span>
			<input class="cv-form-input" type="number" ng-model="vm.salary" placeholder="Заработная плата*" required>
			<span class="cv-form-output" ng-bind="vm.salary+' KZT'" ng-if="vm.salary > 0"></span>
			<input class="cv-form-input" type="text" ng-model="vm.birthDate" placeholder="Дата рождения* гггг-мм-дд" required>
			<span class="cv-form-output" ng-bind="vm.birthDate " ng-if="vm.birthDate != null"></span>
			<div class="cv-form-input-radio">
				<label>Муж</label>
				<input type="radio" value="Мужчина" ng-model="vm.gender" required>
				<label>Жен</label>
				<input type="radio" value="Женщина" ng-model="vm.gender">
			</div>
			<span class="cv-form-output" ng-bind="vm.gender" ng-if="vm.gender != null"></span>
			<input class="cv-form-input" type="text" ng-model="vm.citizenship" placeholder="Гражданство">
			<span class="cv-form-output" ng-bind="vm.citizenship" ng-if="vm.citizenship != null"></span>
			<input class="cv-form-input" type="text" ng-model="vm.address" placeholder="Адрес">
			<span class="cv-form-output" ng-bind="vm.address" ng-if="vm.address != null"></span>
			<input class="cv-form-input" type="text" ng-model="vm.specialization" placeholder="Специализация*" required>
			<span class="cv-form-output" ng-bind="vm.specialization" ng-if="vm.specialization != null"></span>
			<input class="cv-form-input" type="number" ng-model="vm.xpLength" placeholder="Стаж работы (лет)*" required>
			<span class="cv-form-output" ng-bind="vm.xpLength+' лет'" ng-if="vm.xpLength > 0"></span>
			<input class="cv-form-input" type="text" ng-model="vm.education" placeholder="ВУЗ*" required>
			<span class="cv-form-output" ng-bind="vm.education" ng-if="vm.education != null"></span>
			<input class="cv-form-input" type="text" ng-model="vm.courses" placeholder="Курсы">
			<span class="cv-form-output" ng-bind="vm.courses" ng-if="vm.courses != null"></span>
			<input class="cv-form-input" type="text" ng-model="vm.work" placeholder="Прежнее место работы">
			<span class="cv-form-output" ng-bind="vm.work" ng-if="vm.work != null"></span>

			<div class="cv-form-skills">
				<input type="text" ng-model="vm.skill" placeholder="Навык">
				<span ng-click="vm.addSkill()">&plus;</span>
			</div>
			<div class="cv-view-skills">
				<div ng-repeat="skill in vm.skills">
					<span ng-bind="skill"></span>
					<span ng-click="vm.removeSkill($index)">&times;</span>
				</div>
			</div>
			<div class="cv-form-file">
				<input type="file" ng-file-model="vm.file" accept="image/*">
				<label>Загрузить фото к резюме</label>
			</div>
			<button class="btn active" type="submit">Сохранить</button>
			<button class="btn disable" type="reset" ng-click="vm.reset()">Сбросить</button>
		</form>
	</div>
</div>

<span class="message success" ng-if="vm.success">
	Резюме успешно добавлено.
	<span class="message-close" ng-click="vm.success = false">&times;</span>
</span>

<span class="message error" ng-if="vm.error">
	Произошла ошибка, повторите попытку.
	<span class="message-close" ng-click="vm.error = false">&times;</span>
</span>


<div class="modal-backdrop" ng-if="vm.modal" ng-click="vm.closeModal()">
	<div class="modal-window">
		<span>Вы уверены что хотите удалить?</span>
		<button class="btn active" ng-click="vm.deleteCV()">Удалить</button>
		<button class="btn disable" ng-click="vm.closeModal()">Отмена</button>
	</div>
</div>